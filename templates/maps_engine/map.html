{% extends 'market/base.html' %}
{% load static %}

{% block title %}
{{ item.title }} | Map
{% endblock title %}

{% block main %}


<main class="grow" style="margin: 2%;">

    <div class="w-full px-5 mx-auto"> <!-- w-full px-5 mx-auto -->
        <div class="lg:flex">




            <main id="content-wrapper" class="flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible">
                <div class="flex w-full">

                    <div class="flex-auto min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16">
                
                        <div class="text-center pb-4 mb-8 border-b border-gray-200 dark:border-gray-800 pl-15vw pr-15vw">

                    
                            <h1 class="mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl"><span class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">{{ item.title }}</span></h1>

                            <a type="button" href="{% url 'map-render' item.id %}" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">View map</a>

                            {% if item.excel_upload %}
                                {% if item.excel_upload.url %}
                                    {% comment %} <a href="{{ item.excel_upload.url }}">Download Excel</a> {% endcomment %}
                                    <a type="button" href="{{ item.excel_upload.url }}" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Download original Excel file</a>
                                {% endif %}
                            {% endif %}

                            <a type="button" href="{% url 'get_events_as_geojson' item.id %}" download class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Download events as JSON</a>
                            <a type="button" href="{% url 'get_events_as_geojson' item.id %}" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">View events as JSON</a>

                            {% comment %} <a href="{% url 'get_events_as_geojson' item.id %}" download>Download events as JSON</a>
                            <a href="{% url 'get_events_as_geojson' item.id %}">View events as JSON</a> {% endcomment %}
                            <a type="button" href="{% url 'export_events_csv' item.id %}" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Download Event objects as CSV file</a>
                            <a type="button" href="{% url 'events-table' item.id %}" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">View events as dataframe</a>

                            
                            
                                                        
                        </div>
                
                        <div id="mainContent" class="pl-15vw pr-15vw">




                            {% for event in events %}
                                <p>
                                    <a href="{% url 'event' event.id %}">Event #{{ event.id }} - {% if event.title %}{{ event.title }}{% else %}{{ event.primary_city_name }}{% endif %}</a>
                                </p>
                            {% endfor %}






                    
                        </div>

                    </div>


                

                </div> 
                
            </main> 


        </div>
    </div>


    



</main>

{% endblock main %}




